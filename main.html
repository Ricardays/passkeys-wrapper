<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Core Passkeys Wrapper</title>
    <script type="module">
        import { executeAuthenticate, init, isReady, CorePasskeysError } from './core-passkeys-wrapper.js';

        // Make functions global for testing
        window.CorePasskeys = { executeAuthenticate, init, isReady, CorePasskeysError };

        // Simple test function
        window.runTest = async function() {
            try {
                console.log("Starting complete authentication flow with executeAuthenticate...");
                
                const result = await executeAuthenticate(
                    {
                        managerCode: 'insert-manager-code',
                        merchantCode: 'insert-merchant-code',
                        tokenCode: 'insert-token-code',
                        authMethod: 'passkey',
                        authReason: 'payment',
                        amount: {
                            value: '99.99',
                            currency: 'USD'
                        },
                        acquirerMerchantId: '550e8400',
                        acquirerBIN: '444444',
                        merchantCategoryCode: '5734',
                        merchantCountryCode: 'US'
                    },
                    {
                        environment: 'local',
                        locale: 'es_CL'
                    }
                );
                
                console.log("✅ executeAuthenticate completed successfully! Result:", result);

            } catch (error) {
                console.error("❌ executeAuthenticate failed with error:", error);
                console.error("Error name:", error.name);
                console.error("Error code:", error.code);
                console.error("Error message:", error.message);
            }
        };

    </script>
</head>
<body>
    <h1>Core Passkeys Wrapper Test</h1>
    <p>Open the browser console (F12).</p>
    <button onclick="window.runTest()">Run executeAuthenticate Test</button>
    <p>You can also call <code>CorePasskeys.executeAuthenticate()</code> directly from the console.</p>
</body>
</html>